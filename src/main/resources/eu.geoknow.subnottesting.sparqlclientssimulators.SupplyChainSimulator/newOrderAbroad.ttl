@prefix spin: <http://spinrdf.org/sp/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix rsine: <http://lod2.eu/rsine/> .
@prefix http: <http://www.w3.org/2011/http#> .
@prefix dcterms: <http://purl.org/dc/terms/>.

<http://example.org/new_order/FairPhone-ccd657dd-722f-4d86-87c9-65b1de9317e3> a rsine:Subscription;
   dcterms:description "new order from FairPhone-ccd657dd-722f-4d86-87c9-65b1de9317e3";
   rsine:query [
        spin:text "PREFIX cs:<http://purl.org/vocab/changeset/schema#>
            PREFIX spin:<http://spinrdf.org/sp/>
            PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>
            PREFIX skos:<http://www.w3.org/2004/02/skos/core#>
            PREFIX sc: <http://www.xybermotive.com/ontology/> 
            SELECT * WHERE {
                ?cs a cs:ChangeSet .
                ?cs cs:createdDate ?csdate .
                ?cs cs:addition ?addition .
                ?addition rdf:subject ?concept .
                ?addition rdf:predicate rdf:type .
                ?addition rdf:object sc:Order
            }";
         rsine:condition [
                spin:text "PREFIX sc: <http://www.xybermotive.com/ontology/> 
                           PREFIX wgs: <http://www.w3.org/2003/01/geo/wgs84_pos#>
                           PREFIX geo: <http://www.opengis.net/ont/geosparql#>
                           ASK {
                              ?concept sc:connection ?connection . 
                              ?connection sc:receiver ?receiver . 
                              ?receiver wgs:lat ?lat .
                              ?receiver wgs:lon ?lon .
                              geo:sfContains
                              
                               FILTER (bif:st_contains (?geo, bif:st_point (0, 52)))
                           }";
                rsine:expect "true"^^xsd:boolean;
         ];
    ];
    
    rsine:notifier [
        a rsine:httpNotifier ;
        http:methodName "POST";
        http:absoluteURI <http://localhost:8080/subnot-testing/notify> 
    ].